# Generated by SnakeBridge v0.13.0 - DO NOT EDIT MANUALLY
# Regenerate with: mix compile
# Library: dspy 3.1.2
# Python module: dspy.teleprompt.gepa.instruction_proposal
# Python class: ToolProposer

defmodule Dspy.Teleprompt.Gepa.InstructionProposal.ToolProposer do
  @moduledoc """
  Proposer for optimizing tool-using module configurations.

  Supports two types of modules:
  - Tool modules (1 predictor): Optimizes predictor instruction and tool descriptions
  - ReAct modules (2 predictors): Jointly optimizes react instruction, extract instruction, and tool descriptions

  Uses dynamic signature generation to create output fields for each tool and parameter,
  enabling the reflection LM to optimize all components cohesively based on execution feedback.

  This joint optimization approach allows the LM to see how instructions and tool descriptions
  work together, leading to more coherent improvements than optimizing each component separately.
  """
  def __snakebridge_python_name__, do: "dspy.teleprompt.gepa.instruction_proposal"
  def __snakebridge_python_class__, do: "ToolProposer"
  def __snakebridge_library__, do: "dspy"
  @opaque t :: SnakeBridge.Ref.t()

  @doc """
  Constructs `ToolProposer`.

  ## Parameters

  - `args` (term())
  - `kwargs` (term())
  """
  @spec new(list(term()), keyword()) :: {:ok, SnakeBridge.Ref.t()} | {:error, Snakepit.Error.t()}
  def new(args, opts \\ []) do
    {args, opts} = SnakeBridge.Runtime.normalize_args_opts(args, opts)
    SnakeBridge.Runtime.call_class(__MODULE__, :__init__, [] ++ List.wrap(args), opts)
  end

  @doc """
  Format reflective examples using GEPA's markdown structure.

  ## Parameters

  - `reflective_dataset` (list(Dspy.Teleprompt.Gepa.GepaUtils.ReflectiveExample.t()))

  ## Returns

  - `String.t()`
  """
  @spec _format_examples(
          SnakeBridge.Ref.t(),
          list(Dspy.Teleprompt.Gepa.GepaUtils.ReflectiveExample.t()),
          keyword()
        ) :: {:ok, String.t()} | {:error, Snakepit.Error.t()}
  def _format_examples(ref, reflective_dataset, opts \\ []) do
    SnakeBridge.Runtime.call_method(ref, :_format_examples, [reflective_dataset], opts)
  end

  @spec _abc_impl(SnakeBridge.Ref.t()) :: {:ok, term()} | {:error, Snakepit.Error.t()}
  def _abc_impl(ref) do
    SnakeBridge.Runtime.get_attr(ref, :_abc_impl)
  end

  @spec _is_protocol(SnakeBridge.Ref.t()) :: {:ok, term()} | {:error, Snakepit.Error.t()}
  def _is_protocol(ref) do
    SnakeBridge.Runtime.get_attr(ref, :_is_protocol)
  end

  @spec _is_runtime_protocol(SnakeBridge.Ref.t()) :: {:ok, term()} | {:error, Snakepit.Error.t()}
  def _is_runtime_protocol(ref) do
    SnakeBridge.Runtime.get_attr(ref, :_is_runtime_protocol)
  end
end
